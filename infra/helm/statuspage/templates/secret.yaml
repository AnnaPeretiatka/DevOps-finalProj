apiVersion: v1
kind: Secret
metadata:
  name: statuspage-secrets
  namespace: statuspage
type: Opaque
stringData:
  SECRET_KEY: {{ .Values.env.SECRET_KEY | quote }}
  DATABASE_URL: {{ ( .Values.env.DATABASE_URL | default (printf "postgresql://%s:%s@%s:%v/%s?sslmode=require" .Values.env.db.user (urlquery .Values.env.db.password) .Values.env.db.host .Values.env.db.port .Values.env.db.name) ) | quote }}
  DB_PASSWORD: {{ .Values.env.db.password | quote }}
  PGSSLMODE: "require"
  REDIS_URL: {{ .Values.env.REDIS_URL | quote }}